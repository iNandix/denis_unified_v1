import{j as e}from"./feature-workspaces-kl_62eat.js";import{r as t,I as s,h as a,al as i,S as l,am as r,D as n,H as o,p as c,P as d,an as u,ao as h,ap as m,aq as x,d as p,c as f,ar as g,as as b,a3 as v,z as y,V as w,b as j,Y as N,at as k,e as S,s as C,au as _,av as I}from"./vendor-lucide-B9rS96dn.js";const z=[{id:"yt1",title:"Dua Lipa - Levitating",artist:"Dua Lipa",album:"Future Nostalgia",duration:203,thumbnail:"https://img.youtube.com/vi/TUVcZfQmeAE/mqdefault.jpg",source:"mock",videoId:"TUVcZfQmeAE",hasVideo:!0,videoThumbnail:"https://img.youtube.com/vi/TUVcZfQmeAE/maxresdefault.jpg"},{id:"yt2",title:"The Weeknd - Blinding Lights",artist:"The Weeknd",album:"After Hours",duration:200,thumbnail:"https://img.youtube.com/vi/4NRXx6U8oxQ/mqdefault.jpg",source:"mock",videoId:"4NRXx6U8oxQ",hasVideo:!0,videoThumbnail:"https://img.youtube.com/vi/4NRXx6U8oxQ/maxresdefault.jpg"},{id:"yt3",title:"Bad Bunny - Tit√≠ Me Pregunt√≥",artist:"Bad Bunny",album:"Un Verano Sin Ti",duration:205,thumbnail:"https://img.youtube.com/vi/kJQP7kiw5Fk/mqdefault.jpg",source:"mock",videoId:"kJQP7kiw5Fk",hasVideo:!0,videoThumbnail:"https://img.youtube.com/vi/kJQP7kiw5Fk/maxresdefault.jpg"},{id:"yt4",title:"Shakira - Hips Dont Lie",artist:"Shakira",album:"Oral Fixation",duration:226,thumbnail:"https://img.youtube.com/vi/Vs2nzEv7__s/mqdefault.jpg",source:"mock",videoId:"Vs2nzEv7__s",hasVideo:!0,videoThumbnail:"https://img.youtube.com/vi/Vs2nzEv7__s/maxresdefault.jpg"},{id:"yt5",title:"Luis Fonsi - Despacito",artist:"Luis Fonsi",album:"VIDA",duration:229,thumbnail:"https://img.youtube.com/vi/kJQP7kiw5Fk/mqdefault.jpg",source:"mock",videoId:"kJQP7kiw5Fk",hasVideo:!0,videoThumbnail:"https://img.youtube.com/vi/kJQP7kiw5Fk/maxresdefault.jpg"},{id:"yt6",title:"Billie Eilish - Bad Guy",artist:"Billie Eilish",album:"When We All Fall Asleep",duration:194,thumbnail:"https://img.youtube.com/vi/DyDfgMOUWNQ/mqdefault.jpg",source:"mock",videoId:"DyDfgMOUWNQ",hasVideo:!0,videoThumbnail:"https://img.youtube.com/vi/DyDfgMOUWNQ/maxresdefault.jpg"},{id:"yt7",title:"Bruno Mars - Uptown Funk",artist:"Bruno Mars",album:"Uptown Special",duration:270,thumbnail:"https://img.youtube.com/vi/OPf0YbXqDm0/mqdefault.jpg",source:"mock",videoId:"OPf0YbXqDm0",hasVideo:!0,videoThumbnail:"https://img.youtube.com/vi/OPf0YbXqDm0/maxresdefault.jpg"},{id:"yt8",title:"Rosal√≠a - DESPECH√Å",artist:"Rosal√≠a",album:"Motomami",duration:168,thumbnail:"https://img.youtube.com/vi/k50gfL8wJQQ/mqdefault.jpg",source:"mock",videoId:"k50gfL8wJQQ",hasVideo:!0,videoThumbnail:"https://img.youtube.com/vi/k50gfL8wJQQ/maxresdefault.jpg"},{id:"yt9",title:"Karol G - PROVENZA",artist:"Karol G",album:"Ma√±ana Ser√° Bonito",duration:202,thumbnail:"https://img.youtube.com/vi/4K6j914lDDQ/mqdefault.jpg",source:"mock",videoId:"4K6j914lDDQ",hasVideo:!0,videoThumbnail:"https://img.youtube.com/vi/4K6j914lDDQ/maxresdefault.jpg"},{id:"yt10",title:"Feid - FELIZ CUMPLEA√ëOS",artist:"Feid",album:"MOR",duration:196,thumbnail:"https://img.youtube.com/vi/8uC2e6V1E8w/mqdefault.jpg",source:"mock",videoId:"8uC2e6V1E8w",hasVideo:!0,videoThumbnail:"https://img.youtube.com/vi/8uC2e6V1E8w/maxresdefault.jpg"}];const T=new class{constructor(){this.apiBaseUrl="http://localhost:8084",this.cache=new Map,this.cacheDuration=3e5,this.useMockFallback=!1}getCached(e){const t=this.cache.get(e);return t&&Date.now()-t.timestamp<this.cacheDuration?t.data:null}setCache(e,t){this.cache.set(e,{data:t,timestamp:Date.now()})}async searchTracks(e,t=20){if(!e.trim())return{tracks:[],source:"none"};const s=`search:${e}`,a=this.getCached(s);if(a)return{tracks:a,source:"cache"};try{const a=new AbortController,i=setTimeout(()=>a.abort(),3e3),l=await fetch(`${this.apiBaseUrl}/music/search`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,limit:t}),signal:a.signal});if(clearTimeout(i),!l.ok)throw new Error(`HTTP error! status: ${l.status}`);const r=(await l.json()).tracks.map(e=>({id:e.video_id,title:e.title,artist:e.artist,album:e.album,duration:e.duration||0,thumbnail:e.thumbnail||`https://img.youtube.com/vi/${e.video_id}/mqdefault.jpg`,source:"youtube",videoId:e.video_id,hasVideo:!0,videoThumbnail:`https://img.youtube.com/vi/${e.video_id}/maxresdefault.jpg`}));return this.setCache(s,r),{tracks:r,source:"api"}}catch(i){this.useMockFallback=!0;const s=e.toLowerCase(),a=z.filter(e=>e.title.toLowerCase().includes(s)||e.artist.toLowerCase().includes(s)||e.album?.toLowerCase().includes(s));return{tracks:a.length>0?a:z.slice(0,t),source:"mock"}}}getMockTracks(){return z}async play(e){try{const t=new AbortController,s=setTimeout(()=>t.abort(),3e3),a=await fetch(`${this.apiBaseUrl}/music/play`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({track:{video_id:e.videoId,title:e.title,artist:e.artist}}),signal:t.signal});if(clearTimeout(s),!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const i=await a.json();return await this.addToHistory(e),{...e,streamUrl:i.stream_url}}catch(t){return await this.addToHistory(e),e}}async getCurrentTrack(){try{const e=await fetch(`${this.apiBaseUrl}/music/status`);if(404===e.status)return null;if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.json();return t.current_track?{id:t.current_track.video_id,title:t.current_track.title,artist:t.current_track.artist,duration:t.current_track.duration||0,source:"youtube",videoId:t.current_track.video_id,hasVideo:!0,streamUrl:t.stream_url,thumbnail:t.current_track.thumbnail||`https://img.youtube.com/vi/${t.current_track.video_id}/mqdefault.jpg`,videoThumbnail:`https://img.youtube.com/vi/${t.current_track.video_id}/maxresdefault.jpg`}:null}catch(e){return null}}async pause(){try{await fetch(`${this.apiBaseUrl}/music/pause`,{method:"POST"})}catch(e){}}async resume(){try{await fetch(`${this.apiBaseUrl}/music/resume`,{method:"POST"})}catch(e){}}async getPlaylists(){try{const e=localStorage.getItem("denis_music_playlists");if(e)return JSON.parse(e)}catch(e){}return[]}async savePlaylist(e){try{const t=await this.getPlaylists(),s=t.findIndex(t=>t.id===e.id);s>=0?t[s]={...e,updatedAt:Date.now()}:t.push({...e,createdAt:Date.now(),updatedAt:Date.now()}),localStorage.setItem("denis_music_playlists",JSON.stringify(t))}catch(t){throw t}}async deletePlaylist(e){try{const t=(await this.getPlaylists()).filter(t=>t.id!==e);localStorage.setItem("denis_music_playlists",JSON.stringify(t))}catch(t){throw t}}async getFavorites(){try{const e=localStorage.getItem("denis_music_favorites");if(e)return new Set(JSON.parse(e))}catch(e){}return new Set}async saveFavorites(e){try{localStorage.setItem("denis_music_favorites",JSON.stringify([...e]))}catch(t){}}async getHistory(){try{const e=localStorage.getItem("denis_music_history");if(e)return JSON.parse(e)}catch(e){}return[]}async addToHistory(e){try{const t=await this.getHistory(),s=[e,...t.filter(t=>t.id!==e.id)].slice(0,100);localStorage.setItem("denis_music_history",JSON.stringify(s))}catch(t){}}clearCache(){this.cache.clear()}async getRadioStations(){return[{id:"lofi",name:"Lofi Girl",genre:"Lo-Fi",country:"France",url:"https://play.streamafrica.net/lofiradio",listeners:85e3,bitrate:128,isFavorite:!1},{id:"electronic",name:"DFM RTV",genre:"Electronic",country:"Netherlands",url:"https://strm112.1.fm/chilloutlounge_mobile_mp3",listeners:12e3,bitrate:128,isFavorite:!1},{id:"jazz",name:"Smooth Jazz",genre:"Jazz",country:"USA",url:"http://ice1.somafm.com:80",listeners:15e3,bitrate:128,isFavorite:!1},{id:"classical",name:"Classical Radio",genre:"Classical",country:"Austria",url:"https://live.m-media.one/classical_mp3",listeners:5e3,bitrate:128,isFavorite:!1},{id:"rock",name:"Rock Radio",genre:"Rock",country:"UK",url:"https://strm112.1.fm/driftinrock_mp3",listeners:8e3,bitrate:128,isFavorite:!1},{id:"ambient",name:"Ambient Radio",genre:"Ambient",country:"Germany",url:"http://ice1.somafm.com:80/groovesalad",listeners:6e3,bitrate:128,isFavorite:!1},{id:"spanish",name:"Radio Espa√±a",genre:"Spanish",country:"Spain",url:"https://live-cdn-radiosequia.ecdf.server.kiwicomms.io/8360/stream",listeners:25e3,bitrate:128,isFavorite:!1}]}async playRadioViaHASS(e){try{return(await fetch(`${this.apiBaseUrl}/v1/hass/media_player/play_media`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({entity_id:"media_player.living_room",media_content_id:e.url,media_content_type:"music"})})).ok}catch(t){return!1}}},P="1.0.0",E="denis_",F={volume:75,isMuted:!1,theme:"dark",language:"es",sidebarCollapsed:!1,cardDensity:"comfortable",notificationsEnabled:!0,notificationSound:!0,autoSaveLayouts:!0,snapToGrid:!0,showGridLines:!1},M={version:P,lastUpdated:Date.now(),layouts:{current:null,saved:[]},preferences:F,music:{favorites:[],playlists:[],history:[],lastVolume:75},hass:{favorites:[],recentEntities:[]}};const D=new class{constructor(){this.cache=new Map,this.subscribers=new Map,this.initializeStorage()}initializeStorage(){const e=this.getStorageItem("data");if(e){const t=this.runMigrations(e);t&&this.setStorageItem("data",t)}else this.setStorageItem("data",M)}runMigrations(e){if((e.version||"0.0.0")===P)return null;return{...M,...e,layouts:{...M.layouts,...e.layouts},preferences:{...M.preferences,...e.preferences},music:{...M.music,...e.music},hass:{...M.hass,...e.hass},version:P,lastUpdated:Date.now()}}getStorageKey(e){return`${E}${e}`}getStorageItem(e){try{const t=this.cache.get(e);if(void 0!==t)return t;const s=localStorage.getItem(this.getStorageKey(e));if(s){const t=JSON.parse(s);return this.cache.set(e,t),t}}catch(t){}return null}setStorageItem(e,t){try{localStorage.setItem(this.getStorageKey(e),JSON.stringify(t)),this.cache.set(e,t),this.notifySubscribers(e,t)}catch(s){s instanceof Error&&s.name}}updateStorageItem(e,t){const s=this.getStorageItem(e);if(s){const a=t(s);this.setStorageItem(e,a)}}subscribe(e,t){return this.subscribers.has(e)||this.subscribers.set(e,new Set),this.subscribers.get(e).add(t),()=>{this.subscribers.get(e)?.delete(t)}}notifySubscribers(e,t){this.subscribers.get(e)?.forEach(e=>{try{e(t)}catch(s){}})}saveLayout(e,t){const s=this.getStorageItem("data")||M,a=t?{...e,name:t,updatedAt:Date.now()}:e;if(s.layouts.current=a,t){const e=s.layouts.saved.findIndex(e=>e.name===t);e>=0?s.layouts.saved[e]=a:s.layouts.saved.push(a)}s.lastUpdated=Date.now(),this.setStorageItem("data",s)}loadLayout(e){const t=this.getStorageItem("data");return t?e?t.layouts.saved.find(t=>t.name===e)||null:t.layouts.current:null}getSavedLayouts(){const e=this.getStorageItem("data");return e?.layouts.saved||[]}deleteLayout(e){this.updateStorageItem("data",t=>({...t,layouts:{...t.layouts,saved:t.layouts.saved.filter(t=>t.name!==e)},lastUpdated:Date.now()}))}savePreference(e,t){this.updateStorageItem("data",s=>({...s,preferences:{...s.preferences,[e]:t},lastUpdated:Date.now()}))}getPreference(e){const t=this.getStorageItem("data");return t?.preferences?.[e]??F[e]}getAllPreferences(){const e=this.getStorageItem("data");return{...F,...e?.preferences}}savePreferences(e){this.updateStorageItem("data",t=>({...t,preferences:{...t.preferences,...e},lastUpdated:Date.now()}))}saveMusicFavorites(e){const t=e instanceof Set?[...e]:e;this.updateStorageItem("data",e=>({...e,music:{...e.music,favorites:t},lastUpdated:Date.now()}))}getMusicFavorites(){const e=this.getStorageItem("data");return new Set(e?.music?.favorites||[])}saveMusicPlaylists(e){this.updateStorageItem("data",t=>({...t,music:{...t.music,playlists:e},lastUpdated:Date.now()}))}getMusicPlaylists(){const e=this.getStorageItem("data");return e?.music?.playlists||[]}saveMusicHistory(e){const t=e.slice(0,100);this.updateStorageItem("data",e=>({...e,music:{...e.music,history:t},lastUpdated:Date.now()}))}getMusicHistory(){const e=this.getStorageItem("data");return e?.music?.history||[]}saveMusicVolume(e){this.updateStorageItem("data",t=>({...t,music:{...t.music,lastVolume:e},lastUpdated:Date.now()}))}getMusicVolume(){const e=this.getStorageItem("data");return e?.music?.lastVolume??75}saveHASSFavorite(e){this.updateStorageItem("data",t=>{const s=t.hass.favorites.findIndex(t=>t.entityId===e.entityId);let a;return s>=0?(a=[...t.hass.favorites],a[s]={...a[s],...e}):a=[...t.hass.favorites,{...e,order:t.hass.favorites.length}],{...t,hass:{...t.hass,favorites:a},lastUpdated:Date.now()}})}removeHASSFavorite(e){this.updateStorageItem("data",t=>({...t,hass:{...t.hass,favorites:t.hass.favorites.filter(t=>t.entityId!==e)},lastUpdated:Date.now()}))}getHASSFavorites(){const e=this.getStorageItem("data");return e?.hass?.favorites||[]}isHASSFavorite(e){return this.getHASSFavorites().some(t=>t.entityId===e)}addRecentHASSEntity(e){this.updateStorageItem("data",t=>{const s=[e,...t.hass.recentEntities.filter(t=>t!==e)].slice(0,20);return{...t,hass:{...t.hass,recentEntities:s},lastUpdated:Date.now()}})}getRecentHASSEntities(){const e=this.getStorageItem("data");return e?.hass?.recentEntities||[]}exportData(){const e=this.getStorageItem("data")||M;return JSON.stringify(e,null,2)}importData(e){try{const t=JSON.parse(e),s=this.runMigrations(t);return!!s&&(this.setStorageItem("data",s),!0)}catch(t){return!1}}clearAllData(){const e=[];for(let t=0;t<localStorage.length;t++){const s=localStorage.key(t);s?.startsWith(E)&&e.push(s)}e.forEach(e=>localStorage.removeItem(e)),this.cache.clear(),this.initializeStorage()}getStorageStats(){let e=0,t=0;for(let s=0;s<localStorage.length;s++){const a=localStorage.key(s);if(a?.startsWith(E)){const s=localStorage.getItem(a)||"";e+=a.length+s.length,t++}}return{size:e,keys:t}}migrateLegacyMusicData(){try{const e=localStorage.getItem("denis_music_favorites"),t=localStorage.getItem("denis_music_playlists"),s=localStorage.getItem("denis_music_history"),a=localStorage.getItem("denis_music_volume");if(e){const t=JSON.parse(e);this.saveMusicFavorites(t),localStorage.removeItem("denis_music_favorites")}if(t){const e=JSON.parse(t);this.saveMusicPlaylists(e),localStorage.removeItem("denis_music_playlists")}if(s){const e=JSON.parse(s);this.saveMusicHistory(e),localStorage.removeItem("denis_music_history")}a&&(this.saveMusicVolume(parseInt(a,10)),localStorage.removeItem("denis_music_volume"))}catch(e){}}},A=()=>{const[e,s]=t.useState(null),[a,i]=t.useState(!1),[l,r]=t.useState(0),[n,o]=t.useState(0),[c,d]=t.useState(75),[u,h]=t.useState(!1),[m,x]=t.useState(!1),[p,f]=t.useState("none"),[g,b]=t.useState("audio"),[v,y]=t.useState(!1),[w,j]=t.useState([]),[N,k]=t.useState([]),[S,C]=t.useState(new Set),[_,I]=t.useState([]),[z,P]=t.useState(!1),[E,F]=t.useState(null),[M,A]=t.useState([]),[O,L]=t.useState(""),U=t.useRef(null),R=t.useRef(null);t.useEffect(()=>{(async()=>{try{D.migrateLegacyMusicData();const e=D.getMusicFavorites(),t=D.getMusicHistory(),s=D.getMusicPlaylists(),a=D.getMusicVolume();C(e),k(t),I(s),d(a)}catch(e){}})()},[]);const V=()=>"video"===g?R.current:U.current;t.useEffect(()=>{const e=V();e&&(a?e.play().catch(e=>{F("Failed to play media"),i(!1)}):e.pause())},[a,g]),t.useEffect(()=>{if(!e)return;(async()=>{try{let t=e.streamUrl;if(!t&&e.videoId&&(t=await T.getStreamUrl(e.videoId)),t&&(U.current&&(U.current.src=t,U.current.load()),R.current&&(R.current.src=t,R.current.load()),a)){const e=V();e?.play().catch(e=>{F("Failed to play track")})}}catch(t){F("Failed to load media")}})()},[e?.id,e?.streamUrl]),t.useEffect(()=>{const t=t=>{if(!t)return()=>{};const s=()=>{r(t.currentTime)},a=()=>{o(t.duration||e?.duration||0)},l=()=>{Q()},n=e=>{F("Media playback error"),i(!1)};return t.addEventListener("timeupdate",s),t.addEventListener("loadedmetadata",a),t.addEventListener("ended",l),t.addEventListener("error",n),()=>{t.removeEventListener("timeupdate",s),t.removeEventListener("loadedmetadata",a),t.removeEventListener("ended",l),t.removeEventListener("error",n)}},s=t(U.current),a=t(R.current);return()=>{s(),a()}},[e]),t.useEffect(()=>{const e=u?0:c/100;U.current&&(U.current.volume=e),R.current&&(R.current.volume=e)},[c,u]),t.useEffect(()=>{D.saveMusicVolume(c)},[c]);const $=M.length>0?M:T.getMockTracks(),Q=t.useCallback(()=>{"one"===p&&e?(r(0),i(!0)):q()},[p,e,w]),J=t.useCallback(async e=>{try{if(F(null),s(e),r(0),o(e.duration),i(!0),await T.addToHistory(e),k(t=>[e,...t.filter(t=>t.id!==e.id)].slice(0,100)),e.videoId&&!e.streamUrl){const t=await T.getStreamUrl(e.videoId);t&&s(e=>e?{...e,streamUrl:t}:null)}}catch(t){F("Failed to play track")}},[]),H=t.useCallback(()=>{i(e=>!e)},[]),q=t.useCallback(()=>{if(w.length>0){const e=w[0];j(e=>e.slice(1)),J(e)}else if($.length>0&&e){let t=$.findIndex(t=>t.id===e.id)+1;if(m)t=Math.floor(Math.random()*$.length);else if(t>=$.length){if("all"!==p)return void i(!1);t=0}J($[t])}},[w,$,e,m,p,J]),B=t.useCallback(()=>{N.length>0&&J(N[0])},[N,J]),K=t.useCallback(e=>{const t=Math.max(0,Math.min(e,n));U.current&&(U.current.currentTime=t),R.current&&(R.current.currentTime=t),r(t)},[n]),G=t.useCallback(e=>{j(t=>[...t,e])},[]),W=t.useCallback(e=>{j(t=>t.filter((t,s)=>s!==e))},[]),X=t.useCallback(()=>{j([])},[]),Y=t.useCallback(async e=>{const t=new Set(S);S.has(e)?t.delete(e):t.add(e),C(t),D.saveMusicFavorites(t)},[S]),Z=t.useCallback(e=>S.has(e),[S]),ee=t.useCallback(async e=>{if(!e.trim())return A([]),void L("");P(!0),F(null),L(e);try{const{tracks:t,source:s}=await T.searchTracks(e);A(t)}catch(t){F("Search failed. Using local data."),A(T.getMockTracks())}finally{P(!1)}},[]),te=t.useCallback(()=>{A([]),L("")},[]),se=t.useCallback(async(e,t)=>{const s={id:`playlist-${Date.now()}`,name:e,description:t,tracks:[],cover:void 0,createdAt:Date.now(),updatedAt:Date.now()};return await T.savePlaylist(s),I(e=>[...e,s]),s},[]),ae=t.useCallback(async(e,t)=>{const s=_.find(t=>t.id===e);if(s){const a={...s,...t,updatedAt:Date.now()};await T.savePlaylist(a),I(t=>t.map(t=>t.id===e?a:t))}},[_]),ie=t.useCallback(async e=>{await T.deletePlaylist(e),I(t=>t.filter(t=>t.id!==e))},[]),le=t.useCallback(async(e,t)=>{const s=_.find(t=>t.id===e);if(s&&!s.tracks.find(e=>e.id===t.id)){const a={...s,tracks:[...s.tracks,t],updatedAt:Date.now()};await T.savePlaylist(a),I(t=>t.map(t=>t.id===e?a:t))}},[_]),re=t.useCallback(async(e,t)=>{const s=_.find(t=>t.id===e);if(s){const a={...s,tracks:s.tracks.filter(e=>e.id!==t),updatedAt:Date.now()};await T.savePlaylist(a),I(t=>t.map(t=>t.id===e?a:t))}},[_]),ne=t.useCallback(()=>{F(null)},[]),oe=t.useCallback(()=>[...$,...N].filter(e=>S.has(e.id)),[$,N,S]);return{currentTrack:e,isPlaying:a,currentTime:l,duration:n,volume:c,isMuted:u,isShuffled:m,repeatMode:p,playMode:g,isVideoFullscreen:v,queue:w,history:N,favorites:S,playlists:_,isLoading:z,error:E,searchResults:M,searchQuery:O,tracks:$,audioRef:U,videoRef:R,playTrack:J,togglePlay:H,playNext:q,playPrevious:B,seekTo:K,setVolume:d,setIsMuted:h,setIsShuffled:x,setRepeatMode:f,setPlayMode:b,setIsVideoFullscreen:y,addToQueue:G,removeFromQueue:W,clearQueue:X,toggleFavorite:Y,isFavorite:Z,search:ee,clearSearch:te,createPlaylist:se,updatePlaylist:ae,deletePlaylist:ie,addTrackToPlaylist:le,removeTrackFromPlaylist:re,getFavoriteTracks:oe,clearError:ne}},O=e=>{const t=e.toLowerCase().trim();return["sala","sala de estar","living room","livingroom","quarto","sala de estar ","sala "].some(e=>t.includes(e))?"sala":["dormitorio","bedroom","quarto","habitacion","habitaci√≥n","room"].some(e=>t===e||t.includes(e))?"dormitorio":["cocina","kitchen","cozinha"].some(e=>t===e||t.includes(e))?"cocina":["ba√±o","banheiro","bathroom","wc"].some(e=>t===e||t.includes(e))?"bano":["oficina","office","escritorio","trabajo"].some(e=>t===e||t.includes(e))?"oficina":t},L={sala:{es:"Sala",pt:"Sala",icon:"üõãÔ∏è"},dormitorio:{es:"Dormitorio",pt:"Quarto",icon:"üõèÔ∏è"},cocina:{es:"Cocina",pt:"Cozinha",icon:"üç≥"},bano:{es:"Ba√±o",pt:"Banheiro",icon:"üöø"},oficina:{es:"Oficina",pt:"Escrit√≥rio",icon:"üíº"}},U=[{id:"nest_hub_sala",name:"Google Nest Hub",type:"google_nest",location:"Sala de Estar",locationKey:O("Sala de Estar"),icon:"üì∫",ip:"192.168.1.59",entity_id:"media_player.sala_de_estar",available:!0},{id:"chromecast_sala",name:"Chromecast",type:"chromecast",location:"Sala de Estar",locationKey:O("Sala de Estar"),icon:"üì∫",ip:"192.168.1.40",available:!0},{id:"samsung_tv_sala",name:"Samsung TV",type:"tv",location:"Quarto",locationKey:O("Quarto"),icon:"üì∫",available:!0},{id:"nest_mini_dormitorio",name:"Nest Mini",type:"speaker",location:"Dormitorio",locationKey:O("Dormitorio"),icon:"üîä",available:!1},{id:"browser_current",name:"Este Navegador",type:"browser",location:"Local",locationKey:"local",icon:"üíª",available:!0}],R=()=>U.filter(e=>e.available),V=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[j,N]=s.useState("search"),[k,S]=s.useState(!1),[C,_]=t.useState(null),[I,z]=t.useState(!1),{currentTrack:T,isPlaying:P,currentTime:E,volume:F,isMuted:M,isShuffled:D,repeatMode:O,playMode:U,queue:V,history:$,favorites:Q,isLoading:J,error:H,searchResults:q,searchQuery:B,tracks:K,audioRef:G,videoRef:W,playTrack:X,togglePlay:Y,playNext:Z,playPrevious:ee,seekTo:te,setVolume:se,setIsMuted:ae,setIsShuffled:ie,setRepeatMode:le,setPlayMode:re,addToQueue:ne,removeFromQueue:oe,toggleFavorite:ce,search:de,clearSearch:ue,getFavoriteTracks:he,clearError:me}=A();t.useEffect(()=>{const e=R();e.length>0&&!C&&_(e[0])},[]);const xe=e=>`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`,pe=T&&T.duration>0?E/T.duration*100:0,fe=(()=>{switch(j){case"queue":return V;case"history":return $;case"favorites":return he();default:return q.length>0?q:K}})();return e.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden",children:[e.jsxs("div",{className:"px-6 pt-6 pb-4 border-b border-white/5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-500/10 rounded-xl",children:e.jsx(a,{className:"text-purple-400",size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-white/90 tracking-wide",children:"MUSIC_STREAMING"}),e.jsx("p",{className:"text-[9px] text-slate-500 font-mono uppercase tracking-widest",children:"Neural_Audio_Engine"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>z(!I),className:"flex items-center gap-2 px-3 py-2 bg-white/5 rounded-xl hover:bg-white/10 transition-all",children:[e.jsx("span",{className:"text-lg",children:C?.icon||"üéµ"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-[10px] text-white/50 uppercase",children:"Reproducir en"}),e.jsx("p",{className:"text-xs font-bold text-white",children:C?.name||"Seleccionar"})]}),e.jsx(i,{size:14,className:"text-white/40 transition-transform "+(I?"rotate-180":"")})]}),I&&e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-72 bg-slate-900 border border-white/10 rounded-xl shadow-xl z-50 overflow-hidden max-h-80 overflow-y-auto",children:[e.jsx("div",{className:"p-3 border-b border-white/5",children:e.jsx("p",{className:"text-[9px] text-white/40 uppercase tracking-wider",children:"Seleccionar dispositivo"})}),Object.entries((()=>{const e={};return R().forEach(t=>{e[t.locationKey]||(e[t.locationKey]=[]),e[t.locationKey].push(t)}),e})()).map(([t,s])=>{const a=((e,t="es")=>{const s=L[e];return s?{name:s[t],icon:s.icon}:{name:e.charAt(0).toUpperCase()+e.slice(1),icon:"üìç"}})(t);return e.jsxs("div",{className:"border-b border-white/5 last:border-0",children:[e.jsxs("div",{className:"px-3 py-2 bg-white/5 flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:a.icon}),e.jsx("span",{className:"text-xs font-bold text-white/70",children:a.name}),e.jsxs("span",{className:"text-[9px] text-white/40",children:["(",s.length,")"]})]}),s.map(t=>e.jsxs("button",{onClick:()=>{_(t),z(!1)},className:"w-full flex items-center gap-3 p-3 hover:bg-white/5 transition-all "+(C?.id===t.id?"bg-purple-500/10 border-l-2 border-purple-500":""),children:[e.jsx("span",{className:"text-lg",children:t.icon}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"text-xs font-bold text-white",children:t.name}),e.jsx("p",{className:"text-[9px] text-white/40",children:t.type.replace("_"," ")})]}),C?.id===t.id&&e.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full"})]},t.id))]},t)})]})]})]}),e.jsx("div",{className:"flex gap-1 p-1 bg-white/5 rounded-xl",children:[{id:"search",label:"Search",icon:l},{id:"queue",label:`Queue (${V.length})`,icon:r},{id:"history",label:"History",icon:n},{id:"favorites",label:`Favs (${Q.size})`,icon:o}].map(t=>e.jsxs("button",{onClick:()=>{N(t.id),me()},className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-[9px] font-bold uppercase tracking-wider transition-all "+(j===t.id?"bg-white/10 text-white":"text-white/40 hover:text-white/70"),children:[e.jsx(t.icon,{size:12}),t.label]},t.id))})]}),H&&e.jsxs("div",{className:"mx-6 mt-4 p-3 bg-red-500/10 border border-red-500/20 rounded-xl flex items-center gap-2",children:[e.jsx(c,{size:16,className:"text-red-400 flex-shrink-0"}),e.jsx("p",{className:"text-xs text-red-400 flex-1",children:H}),e.jsx("button",{onClick:me,className:"text-xs text-red-400 hover:text-red-300",children:"‚úï"})]}),e.jsx("div",{className:"flex-1 overflow-hidden flex",children:e.jsxs("div",{className:"flex-1 flex flex-col p-6 overflow-y-auto",children:["search"===j&&e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx("input",{type:"text",value:B,onChange:e=>de(e.target.value),onKeyPress:e=>"Enter"===e.key&&(async()=>{B.trim()&&await de(B)})(),placeholder:"Search tracks, artists...",className:"w-full bg-white/5 border border-white/10 rounded-2xl px-4 py-3 pl-10 text-sm text-white/90 placeholder-white/30 focus:outline-none focus:border-purple-500/50"}),e.jsx(l,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/30",size:16}),B&&e.jsx("button",{onClick:ue,className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 text-white/30 hover:text-white",children:"‚úï"})]}),J&&e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"w-8 h-8 border-2 border-purple-500/30 border-t-purple-500 rounded-full animate-spin"})}),e.jsxs("div",{className:"flex-1 overflow-y-auto space-y-2",children:[fe.map((t,s)=>e.jsxs("div",{onClick:()=>(async e=>{if(C){if("browser"!==C.type&&C.entity_id)try{await fetch("http://localhost:19020/v1/music/play",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({video_id:e.videoId,title:e.title,artist:e.artist,device:C.entity_id})})}catch(t){}X(e)}})(t),className:"flex items-center gap-3 p-3 rounded-xl cursor-pointer transition-all group "+(T?.id===t.id?"bg-purple-500/10 border border-purple-500/20":"hover:bg-white/5"),children:[e.jsxs("div",{className:"w-10 h-10 rounded-lg bg-slate-800 flex items-center justify-center overflow-hidden relative",children:[t.thumbnail?e.jsx("img",{src:t.thumbnail,alt:"",className:"w-full h-full object-cover"}):e.jsx(a,{size:16,className:"text-slate-500"}),T?.id===t.id&&P&&e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:e.jsx("div",{className:"flex gap-0.5",children:[0,1,2].map(t=>e.jsx("div",{className:"w-0.5 h-3 bg-purple-400 animate-pulse",style:{animationDelay:.1*t+"s"}},t))})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-semibold truncate "+(T?.id===t.id?"text-purple-300":"text-white/90"),children:t.title}),e.jsxs("p",{className:"text-[9px] text-white/40",children:[t.artist," ","mock"===t.source&&"‚Ä¢ Demo"]})]}),e.jsx("span",{className:"text-[9px] text-white/30 font-mono",children:xe(t.duration)}),e.jsx("button",{onClick:e=>{e.stopPropagation(),ne(t)},className:"p-1.5 text-white/30 hover:text-purple-400 opacity-0 group-hover:opacity-100 transition-all",title:"Add to queue",children:e.jsx(d,{size:14})}),e.jsx("button",{onClick:e=>{e.stopPropagation(),ce(t.id)},className:"p-1.5 transition-all "+(Q.has(t.id)?"text-red-400":"text-white/30 hover:text-white"),title:Q.has(t.id)?"Remove from favorites":"Add to favorites",children:e.jsx(o,{size:14,fill:Q.has(t.id)?"currentColor":"none"})})]},`${j}-${t.id}-${s}`)),0===fe.length&&!J&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-32 text-slate-500",children:[e.jsx(a,{size:32,className:"mb-2 opacity-30"}),e.jsx("p",{className:"text-sm",children:"No tracks found"})]})]})]}),"queue"===j&&e.jsx("div",{className:"flex-1 overflow-y-auto space-y-2",children:0===V.length?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-500",children:[e.jsx(r,{size:48,className:"mb-4 opacity-30"}),e.jsx("p",{className:"text-sm",children:"Queue is empty"}),e.jsx("p",{className:"text-[10px] mt-1",children:"Add tracks from search"})]}):V.map((t,s)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-white/[0.03] hover:bg-white/5 transition-all group",children:[e.jsx("span",{className:"text-[9px] text-white/30 font-mono w-4",children:s+1}),e.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-800 flex items-center justify-center",children:t.thumbnail?e.jsx("img",{src:t.thumbnail,alt:"",className:"w-full h-full object-cover"}):e.jsx(a,{size:16,className:"text-slate-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-semibold text-white/90 truncate",children:t.title}),e.jsx("p",{className:"text-[9px] text-white/40",children:t.artist})]}),e.jsx("span",{className:"text-[9px] text-white/30 font-mono",children:xe(t.duration)}),e.jsx("button",{onClick:()=>oe(s),className:"p-1.5 text-white/30 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-all",title:"Remove from queue",children:e.jsx(u,{size:14})})]},`queue-${t.id}-${s}`))}),("history"===j||"favorites"===j)&&e.jsx("div",{className:"flex-1 overflow-y-auto space-y-2",children:0===fe.length?e.jsx("div",{className:"flex flex-col items-center justify-center h-full text-slate-500",children:"history"===j?e.jsxs(e.Fragment,{children:[e.jsx(n,{size:48,className:"mb-4 opacity-30"}),e.jsx("p",{className:"text-sm",children:"No history yet"})]}):e.jsxs(e.Fragment,{children:[e.jsx(o,{size:48,className:"mb-4 opacity-30"}),e.jsx("p",{className:"text-sm",children:"No favorites yet"}),e.jsx("p",{className:"text-[10px] mt-1",children:"Add tracks to favorites"})]})}):fe.map((t,s)=>e.jsxs("div",{onClick:()=>X(t),className:"flex items-center gap-3 p-3 rounded-xl hover:bg-white/5 cursor-pointer transition-all group",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-800 flex items-center justify-center overflow-hidden",children:t.thumbnail?e.jsx("img",{src:t.thumbnail,alt:"",className:"w-full h-full object-cover"}):e.jsx(a,{size:16,className:"text-slate-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-semibold text-white/90 truncate",children:t.title}),e.jsx("p",{className:"text-[9px] text-white/40",children:t.artist})]}),e.jsx("span",{className:"text-[9px] text-white/30 font-mono",children:xe(t.duration)}),"favorites"===j&&e.jsx("button",{onClick:e=>{e.stopPropagation(),ce(t.id)},className:"p-1.5 text-red-400 hover:text-red-300",title:"Remove from favorites",children:e.jsx(o,{size:14,fill:"currentColor"})})]},`${j}-${t.id}-${s}`))})]})}),T&&k&&e.jsxs("div",{className:"relative mx-6 mb-4 rounded-xl overflow-hidden bg-black aspect-video",children:[e.jsx("video",{ref:W,className:"w-full h-full object-contain",crossOrigin:"anonymous",playsInline:!0,controls:!1}),e.jsx("button",{onClick:()=>S(!1),className:"absolute top-2 right-2 p-2 bg-black/50 hover:bg-black/70 text-white rounded-lg transition-colors",title:"Hide video",children:e.jsx(h,{size:16})})]}),T&&e.jsxs("div",{className:"px-6 py-4 border-t border-white/5 bg-white/[0.02]",children:[e.jsx("div",{className:"h-1 bg-white/10 rounded-full mb-4 cursor-pointer group relative overflow-hidden",onClick:e=>{const t=e.currentTarget.getBoundingClientRect(),s=(e.clientX-t.left)/t.width;te(s*T.duration)},children:e.jsx("div",{className:"absolute left-0 top-0 h-full bg-gradient-to-r from-purple-500 to-cyan-400 rounded-full transition-all",style:{width:`${pe}%`}})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500 to-cyan-500 flex items-center justify-center shadow-lg overflow-hidden",children:T.thumbnail?e.jsx("img",{src:T.thumbnail,alt:"",className:"w-full h-full object-cover"}):e.jsx(a,{size:20,className:"text-white"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs font-bold text-white truncate",children:T.title}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-[9px] text-white/40 truncate",children:T.artist}),C&&e.jsxs("span",{className:"text-[9px] px-1.5 py-0.5 bg-white/10 rounded flex items-center gap-1",children:[e.jsx("span",{children:C.icon}),e.jsx("span",{className:"text-white/50",children:C.name})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>ie(!D),className:"p-2 transition-all "+(D?"text-purple-400":"text-white/30 hover:text-white"),title:D?"Shuffle on":"Shuffle off",children:e.jsx(m,{size:14})}),e.jsx("button",{onClick:ee,className:"p-2 text-white/60 hover:text-white transition-colors",title:"Previous",children:e.jsx(x,{size:18})}),e.jsx("button",{onClick:Y,className:"p-3 bg-white text-black rounded-full hover:scale-105 transition-all shadow-xl",children:P?e.jsx(p,{size:18,fill:"black"}):e.jsx(f,{size:18,fill:"black"})}),e.jsx("button",{onClick:Z,className:"p-2 text-white/60 hover:text-white transition-colors",title:"Next",children:e.jsx(g,{size:18})}),e.jsx("button",{onClick:()=>le(e=>"none"===e?"all":"all"===e?"one":"none"),className:"p-2 transition-all "+("none"!==O?"text-purple-400":"text-white/30 hover:text-white"),title:"one"===O?"Repeat one":"all"===O?"Repeat all":"Repeat off",children:"one"===O?e.jsx("span",{className:"text-[8px] font-bold",children:"1"}):e.jsx(b,{size:14})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1 mr-2 p-1 bg-white/5 rounded-lg",children:[e.jsx("button",{onClick:()=>{re("audio"),S(!1)},className:"p-1.5 rounded transition-all "+("audio"===U?"bg-purple-500/20 text-purple-400":"text-white/30 hover:text-white"),title:"Audio mode",children:e.jsx(a,{size:14})}),e.jsx("button",{onClick:()=>{re("video"),S(!0)},className:"p-1.5 rounded transition-all "+("video"===U?"bg-purple-500/20 text-purple-400":"text-white/30 hover:text-white"),title:"Video mode",children:e.jsx(v,{size:14})})]}),e.jsx("button",{onClick:()=>ae(!M),className:"text-white/40 hover:text-white transition-colors",children:M||0===F?e.jsx(y,{size:14}):e.jsx(w,{size:14})}),e.jsx("div",{className:"w-20 h-1 bg-white/10 rounded-full cursor-pointer",onClick:e=>{const t=e.currentTarget.getBoundingClientRect(),s=(e.clientX-t.left)/t.width;se(100*s)},children:e.jsx("div",{className:"h-full bg-purple-500 rounded-full",style:{width:`${M?0:F}%`}})}),e.jsx("span",{className:"text-[9px] text-white/30 font-mono w-8",children:xe(E)})]})]})]}),e.jsx("audio",{ref:G,crossOrigin:"anonymous",preload:"metadata"}),!k&&e.jsx("video",{ref:W,className:"hidden",crossOrigin:"anonymous",preload:"metadata"})]})}},Symbol.toStringTag,{value:"Module"})),$=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[s,l]=t.useState([]),[r,c]=t.useState(null),[d,u]=t.useState(!1),[h,m]=t.useState(75),[x,g]=t.useState("all"),[b,v]=t.useState("all"),[y,_]=t.useState(!1),[I,z]=t.useState(null),[P,E]=t.useState(!0),[F,M]=t.useState(new Set),[D,A]=t.useState(new Set),O=t.useRef(null),L={Spain:"üá™üá∏",Brazil:"üáßüá∑",France:"üá´üá∑",UK:"üá¨üáß",USA:"üá∫üá∏",Netherlands:"üá≥üá±",Austria:"üá¶üáπ",Germany:"üá©üá™"};t.useEffect(()=>{(async()=>{try{_(!0);const e=(await T.getRadioStations()).sort((e,t)=>(t.listeners||0)-(e.listeners||0));l(e)}catch(e){z("Failed to load radio stations")}finally{_(!1)}})()},[]),t.useEffect(()=>{const e=localStorage.getItem("denis_radio_favorites");e&&M(new Set(JSON.parse(e)))},[]),t.useEffect(()=>{const e=()=>E(!0),t=()=>E(!1);return window.addEventListener("online",e),window.addEventListener("offline",t),E(navigator.onLine),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}},[]);const U=async e=>{try{if(z(null),r?.id===e.id)d?(O.current?.pause(),u(!1)):(await(O.current?.play()),u(!0));else{_(!0),c(e),O.current?(O.current.pause(),O.current.src=e.url,O.current.load()):(O.current=new Audio(e.url),O.current.volume=h/100);try{await O.current.play(),u(!0)}catch(t){z("Unable to play station. Trying HASS...");await T.playRadioViaHASS(e)?(u(!0),z(null)):u(!1)}}}catch(s){z("Failed to play station"),u(!1)}finally{_(!1)}};t.useEffect(()=>{O.current&&(O.current.volume=h/100)},[h]),t.useEffect(()=>()=>{O.current&&(O.current.pause(),O.current=null)},[]);const R=t=>{switch(t){case"Lo-Fi":return e.jsx(a,{size:12});case"Electronic":return e.jsx(n,{size:12});case"Jazz":return e.jsx(C,{size:12});case"Classical":return e.jsx(S,{size:12});default:return e.jsx(j,{size:12})}},V=(()=>{const e=s.filter(e=>"all"===x||e.genre===x),t={};e.forEach(e=>{t[e.country]||(t[e.country]=[]),t[e.country].push(e)});const a=[];return["Spain","Brazil"].forEach(e=>{t[e]&&(a.push({code:e,name:e,flag:L[e]||"üåç",stations:t[e]}),delete t[e])}),Object.keys(t).sort().forEach(e=>{a.push({code:e,name:e,flag:L[e]||"üåç",stations:t[e]})}),a})();return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-white/5 bg-white/[0.02]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-pink-500/10 rounded-xl",children:e.jsx(j,{className:"text-pink-400",size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-white/90 tracking-wide",children:"RADIO"}),e.jsxs("p",{className:"text-[9px] text-slate-500 font-mono",children:[s.length," emisoras ‚Ä¢ ",F.size," favoritas"]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:P?e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-green-500/10 rounded-full",children:[e.jsx(N,{size:10,className:"text-green-400"}),e.jsx("span",{className:"text-[8px] text-green-400 font-bold",children:"ONLINE"})]}):e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-red-500/10 rounded-full",children:[e.jsx(k,{size:10,className:"text-red-400"}),e.jsx("span",{className:"text-[8px] text-red-400 font-bold",children:"OFFLINE"})]})})]}),e.jsx("div",{className:"flex gap-1.5 overflow-x-auto pb-2 scrollbar-hide",children:["all","Lo-Fi","Electronic","Jazz","Classical","Rock","Ambient","News","Spanish"].map(t=>e.jsxs("button",{onClick:()=>g(t),className:"flex items-center gap-1 px-3 py-1.5 rounded-lg text-[9px] font-bold uppercase whitespace-nowrap transition-all "+(x===t?"bg-pink-500 text-white shadow-lg shadow-pink-500/20":"bg-white/5 text-white/50 hover:bg-white/10"),children:[R(t),t]},t))})]}),e.jsx("div",{className:"px-3 py-2 border-b border-white/5",children:e.jsxs("div",{className:"flex gap-1.5 overflow-x-auto scrollbar-hide",children:[e.jsx("button",{onClick:()=>v("all"),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-[9px] font-bold uppercase whitespace-nowrap transition-all "+("all"===b?"bg-white/20 text-white":"bg-white/5 text-white/50 hover:bg-white/10"),children:"üåç Todos"}),V.map(t=>e.jsxs("button",{onClick:()=>v(t.code),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-[9px] font-bold uppercase whitespace-nowrap transition-all "+(b===t.code?"bg-white/20 text-white":"bg-white/5 text-white/50 hover:bg-white/10"),children:[t.flag," ",t.name,e.jsxs("span",{className:"text-[10px] opacity-60",children:["(",t.stations.length,")"]})]},t.code))]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-3",children:y&&0===s.length?e.jsxs("div",{className:"flex flex-col items-center justify-center h-40",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-pink-500/30 border-t-pink-500 rounded-full animate-spin"}),e.jsx("span",{className:"text-xs text-white/50 mt-3",children:"Cargando emisoras..."})]}):V.filter(e=>"all"===b||e.code===b).map(t=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>(e=>{const t=new Set(D);t.has(e)?t.delete(e):t.add(e),A(t)})(t.code),className:"flex items-center gap-2 w-full px-2 py-1.5 rounded-lg bg-white/5 hover:bg-white/10 transition-all",children:[e.jsx("span",{className:"text-lg",children:t.flag}),e.jsx("span",{className:"text-xs font-bold text-white/80",children:t.name}),e.jsxs("span",{className:"text-[10px] text-white/40",children:["(",t.stations.length,")"]}),e.jsx(i,{size:14,className:"ml-auto text-white/40 transition-transform "+(D.has(t.code)?"rotate-180":"")})]}),(D.has(t.code)||"all"!==b)&&e.jsx("div",{className:"space-y-1.5 ml-4 pl-3 border-l border-white/10",children:t.stations.map(t=>{return e.jsxs("div",{onClick:()=>P&&U(t),className:`flex items-center gap-3 p-2.5 rounded-lg cursor-pointer transition-all group ${P?"":"opacity-50 cursor-not-allowed"} ${r?.id===t.id?"bg-pink-500/10 border border-pink-500/20":"bg-white/[0.02] hover:bg-white/5"}`,children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center transition-transform group-hover:scale-105 "+(r?.id===t.id?"bg-gradient-to-br from-pink-500 to-rose-500":"bg-slate-800"),children:r?.id===t.id&&d?e.jsxs("div",{className:"flex gap-0.5",children:[e.jsx("div",{className:"w-0.5 h-2 bg-white animate-pulse"}),e.jsx("div",{className:"w-0.5 h-3 bg-white animate-pulse",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-0.5 h-2 bg-white animate-pulse",style:{animationDelay:"0.2s"}})]}):e.jsx(j,{size:14,className:r?.id===t.id?"text-white":"text-slate-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-semibold text-white truncate",children:t.name}),F.has(t.id)&&e.jsx(o,{size:10,className:"text-pink-400 fill-pink-400 flex-shrink-0"})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-[9px] text-white/40",children:[e.jsx("span",{className:"px-1 py-0.5 bg-white/10 rounded text-[8px]",children:t.genre}),e.jsxs("span",{children:["üëÇ ",(s=t.listeners,s?s>=1e3?`${(s/1e3).toFixed(0)}k`:s.toString():"0")]})]})]}),e.jsx("button",{onClick:e=>{e.stopPropagation(),(e=>{const t=new Set(F);t.has(e)?t.delete(e):t.add(e),M(t),localStorage.setItem("denis_radio_favorites",JSON.stringify([...t]))})(t.id)},className:"p-1.5 rounded-lg transition-all "+(F.has(t.id)?"text-pink-400":"text-white/30 hover:text-white hover:bg-white/10"),children:e.jsx(o,{size:14,fill:F.has(t.id)?"currentColor":"none"})})]},t.id);var s})})]},t.code))}),r&&e.jsx("div",{className:"px-4 py-3 border-t border-white/5 bg-white/[0.02]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-pink-500 to-rose-500 flex items-center justify-center",children:e.jsx(j,{size:18,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-white truncate max-w-[150px]",children:r.name}),e.jsxs("p",{className:"text-[9px] text-pink-400",children:[L[r.country]||"üåç"," ",r.country," ‚Ä¢ ",r.genre]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>U(r),disabled:y,className:"w-10 h-10 bg-white rounded-full flex items-center justify-center hover:scale-105 transition-all shadow-lg disabled:opacity-50",children:y?e.jsx("div",{className:"w-4 h-4 border-2 border-black/30 border-t-black rounded-full animate-spin"}):d?e.jsx(p,{size:18,fill:"black"}):e.jsx(f,{size:18,fill:"black",className:"ml-0.5"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{size:14,className:"text-white/40"}),e.jsx("div",{className:"w-20 h-1.5 bg-white/10 rounded-full cursor-pointer",onClick:e=>{const t=e.currentTarget.getBoundingClientRect();m((e.clientX-t.left)/t.width*100)},children:e.jsx("div",{className:"h-full bg-pink-500 rounded-full transition-all",style:{width:`${h}%`}})})]})]})]})})]})}},Symbol.toStringTag,{value:"Module"})),Q=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const{playlists:s,createPlaylist:i,updatePlaylist:l,deletePlaylist:r,addTrackToPlaylist:o,removeTrackFromPlaylist:h,playTrack:m,tracks:x}=A(),[p,g]=t.useState(null),[b,v]=t.useState(!1),[y,w]=t.useState(""),[j,N]=t.useState(""),[k,S]=t.useState(null),[C,z]=t.useState(""),[T,P]=t.useState(null),[E,F]=t.useState(null),[M,D]=t.useState(!1);t.useEffect(()=>{if(T||E){const e=setTimeout(()=>{P(null),F(null)},3e3);return()=>clearTimeout(e)}},[T,E]);const O=e=>{const t=e.reduce((e,t)=>e+t.duration,0),s=Math.floor(t/3600),a=Math.floor(t%3600/60);return s>0?`${s}h ${a}m`:`${a} min`},L=async e=>{if(C.trim())try{await l(e,{name:C.trim()}),S(null),z(""),F("Playlist renamed")}catch(t){P("Failed to rename playlist")}},U=e=>{e.tracks.length>0&&m(e.tracks[0])};return e.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden",children:[e.jsxs("div",{className:"px-6 pt-6 pb-4 border-b border-white/5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500/10 rounded-xl",children:e.jsx(n,{className:"text-blue-400",size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-white/90 tracking-wide",children:p?p.name:"PLAYLISTS"}),e.jsx("p",{className:"text-[9px] text-slate-500 font-mono uppercase tracking-widest",children:p?`${p.tracks.length} tracks ‚Ä¢ ${O(p.tracks)}`:`${s.length} Collections`})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:p?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>D(!0),className:"p-2 bg-blue-500/20 text-blue-400 rounded-lg hover:bg-blue-500/30 transition-all",title:"Add track",children:e.jsx(d,{size:18})}),e.jsx("button",{onClick:()=>g(null),className:"px-3 py-1.5 bg-white/5 text-white/60 rounded-lg text-[10px] font-bold uppercase hover:bg-white/10 transition-all",children:"Back"})]}):e.jsx("button",{onClick:()=>v(!0),className:"p-2 bg-blue-500/20 text-blue-400 rounded-lg hover:bg-blue-500/30 transition-all",title:"Create playlist",children:e.jsx(d,{size:18})})})]}),T&&e.jsxs("div",{className:"mt-3 p-3 bg-red-500/10 border border-red-500/20 rounded-xl flex items-center gap-2",children:[e.jsx(c,{size:16,className:"text-red-400"}),e.jsx("p",{className:"text-xs text-red-400 flex-1",children:T})]}),E&&e.jsxs("div",{className:"mt-3 p-3 bg-green-500/10 border border-green-500/20 rounded-xl flex items-center gap-2",children:[e.jsx(_,{size:16,className:"text-green-400"}),e.jsx("p",{className:"text-xs text-green-400 flex-1",children:E})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:p?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"p-4 bg-gradient-to-b from-white/5 to-transparent rounded-xl mb-4",children:[e.jsxs("div",{className:"flex items-end gap-4",children:[e.jsx("div",{className:"w-24 h-24 rounded-xl bg-slate-800 flex items-center justify-center shadow-xl",children:e.jsx(a,{size:40,className:"text-slate-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-[9px] text-white/40 uppercase mb-1",children:"Playlist"}),e.jsx("h2",{className:"text-xl font-bold text-white",children:p.name}),e.jsxs("p",{className:"text-sm text-white/50",children:[p.tracks.length," tracks ‚Ä¢ ",O(p.tracks)]}),p.description&&e.jsx("p",{className:"text-xs text-white/40 mt-1",children:p.description})]})]}),e.jsx("div",{className:"flex items-center gap-3 mt-4",children:e.jsx("button",{onClick:()=>U(p),disabled:0===p.tracks.length,className:"w-12 h-12 flex items-center justify-center bg-green-500 rounded-full text-white hover:scale-105 transition-transform disabled:opacity-50 shadow-lg",children:e.jsx(f,{size:22,fill:"white"})})})]}),0===p.tracks.length?e.jsxs("div",{className:"text-center py-8 text-slate-500",children:[e.jsx(a,{size:48,className:"mx-auto mb-4 opacity-30"}),e.jsx("p",{className:"text-sm",children:"Playlist is empty"}),e.jsx("button",{onClick:()=>D(!0),className:"mt-2 text-blue-400 text-sm hover:underline",children:"Add your first track"})]}):p.tracks.map((t,s)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl hover:bg-white/5 group cursor-pointer transition-all",onClick:()=>m(t),children:[e.jsx("span",{className:"w-6 text-center text-slate-500 text-sm group-hover:hidden",children:s+1}),e.jsx("button",{className:"w-6 text-center text-white hidden group-hover:block",onClick:e=>{e.stopPropagation(),m(t)},children:e.jsx(f,{size:14,fill:"white"})}),e.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-800 flex items-center justify-center overflow-hidden",children:t.thumbnail?e.jsx("img",{src:t.thumbnail,alt:"",className:"w-full h-full object-cover"}):e.jsx(a,{size:16,className:"text-slate-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-white truncate",children:t.title}),e.jsx("p",{className:"text-slate-400 text-xs truncate",children:t.artist})]}),e.jsxs("span",{className:"text-slate-500 text-xs",children:[Math.floor(t.duration/60),":",(t.duration%60).toString().padStart(2,"0")]}),e.jsx("button",{onClick:e=>{e.stopPropagation(),(async e=>{if(p)try{await h(p.id,e),F("Track removed from playlist")}catch(t){P("Failed to remove track")}})(t.id)},className:"opacity-0 group-hover:opacity-100 p-2 text-white/40 hover:text-red-400 transition-all",title:"Remove from playlist",children:e.jsx(u,{size:14})})]},t.id))]}):e.jsx("div",{className:"space-y-3",children:0===s.length?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-500",children:[e.jsx(n,{size:48,className:"mb-4 opacity-30"}),e.jsx("p",{className:"text-sm",children:"No playlists yet"}),e.jsx("button",{onClick:()=>v(!0),className:"mt-4 px-4 py-2 bg-blue-500/20 text-blue-400 rounded-lg text-xs font-bold uppercase hover:bg-blue-500/30",children:"Create your first playlist"})]}):s.map(t=>e.jsx("div",{className:"p-4 bg-white/[0.03] rounded-xl hover:bg-white/5 transition-all group cursor-pointer",onClick:()=>g(t),children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 rounded-xl bg-slate-800 flex items-center justify-center",children:e.jsx(a,{size:24,className:"text-slate-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[k===t.id?e.jsx("input",{type:"text",value:C,onChange:e=>z(e.target.value),onBlur:()=>L(t.id),onKeyDown:e=>"Enter"===e.key&&L(t.id),className:"bg-white/10 text-white text-sm px-2 py-1 rounded w-full outline-none",autoFocus:!0,onClick:e=>e.stopPropagation()}):e.jsx("p",{className:"text-sm font-semibold text-white truncate",children:t.name}),e.jsxs("p",{className:"text-[10px] text-white/50",children:[t.tracks.length," tracks ‚Ä¢ ",O(t.tracks)]}),t.description&&e.jsx("p",{className:"text-[9px] text-white/30 mt-1 truncate",children:t.description})]}),e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-all",children:[e.jsx("button",{onClick:e=>{e.stopPropagation(),U(t)},className:"w-10 h-10 flex items-center justify-center bg-green-500 rounded-full text-white hover:scale-105 transition-transform",title:"Play playlist",children:e.jsx(f,{size:18,fill:"white"})}),e.jsx("button",{onClick:e=>{e.stopPropagation(),S(t.id),z(t.name)},className:"p-2 text-white/40 hover:text-white",title:"Rename",children:e.jsx(I,{size:16})}),e.jsx("button",{onClick:e=>{e.stopPropagation(),(async e=>{if(confirm("Are you sure you want to delete this playlist?"))try{await r(e),p?.id===e&&g(null),F("Playlist deleted")}catch(t){P("Failed to delete playlist")}})(t.id)},className:"p-2 text-white/40 hover:text-red-400",title:"Delete",children:e.jsx(u,{size:16})})]})]})},t.id))})}),b&&e.jsx("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-2xl p-6 w-full max-w-sm m-4",children:[e.jsx("h3",{className:"text-white font-semibold mb-4",children:"New Playlist"}),e.jsx("input",{type:"text",placeholder:"Playlist name",value:y,onChange:e=>w(e.target.value),className:"w-full bg-white/5 border border-white/10 text-white px-4 py-3 rounded-xl mb-3 outline-none focus:border-blue-500/50",autoFocus:!0}),e.jsx("input",{type:"text",placeholder:"Description (optional)",value:j,onChange:e=>N(e.target.value),className:"w-full bg-white/5 border border-white/10 text-white px-4 py-3 rounded-xl mb-4 outline-none focus:border-blue-500/50"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>v(!1),className:"flex-1 px-4 py-3 text-white/50 hover:text-white transition-colors rounded-xl hover:bg-white/5",children:"Cancel"}),e.jsx("button",{onClick:async()=>{if(y.trim())try{await i(y.trim(),j.trim()),w(""),N(""),v(!1),F("Playlist created successfully")}catch(e){P("Failed to create playlist")}else P("Playlist name is required")},disabled:!y.trim(),className:"flex-1 px-4 py-3 bg-blue-500 text-white rounded-xl hover:bg-blue-400 transition-colors disabled:opacity-50",children:"Create"})]})]})}),M&&p&&e.jsx("div",{className:"absolute inset-0 bg-black/70 flex items-end z-50",children:e.jsxs("div",{className:"w-full bg-slate-900 border-t border-white/10 rounded-t-3xl p-6 max-h-[70%] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"Add Track to Playlist"}),e.jsx("button",{onClick:()=>D(!1),className:"p-2 text-white/40 hover:text-white",children:"‚úï"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto space-y-2",children:x.map(t=>{const s=p.tracks.some(e=>e.id===t.id);return e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl transition-all "+(s?"opacity-50":"hover:bg-white/5 cursor-pointer"),onClick:()=>!s&&(async e=>{if(p)try{await o(p.id,e),F("Track added to playlist"),D(!1)}catch(t){P("Failed to add track")}})(t),children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-800 flex items-center justify-center overflow-hidden",children:t.thumbnail?e.jsx("img",{src:t.thumbnail,alt:"",className:"w-full h-full object-cover"}):e.jsx(a,{size:16,className:"text-slate-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-white truncate",children:t.title}),e.jsx("p",{className:"text-slate-400 text-xs truncate",children:t.artist})]}),s?e.jsx("span",{className:"text-[10px] text-white/30",children:"Already added"}):e.jsx("button",{className:"p-2 text-blue-400 hover:text-blue-300",children:e.jsx(d,{size:18})})]},t.id)})})]})})]})}},Symbol.toStringTag,{value:"Module"}));export{V as M,Q as P,$ as a};
